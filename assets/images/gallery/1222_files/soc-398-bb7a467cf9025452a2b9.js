(window.webpackJsonp=window.webpackJsonp||[]).push([[398],{341:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(2),s=n.n(o),r=(n(919),n(232)),d=n(240),l=n(356),c=n.n(l),m=n(233),u=n(237),p=n(4),f=Object(d.a)(()=>Promise.all([n.e(12),n.e(16),n.e(21),n.e(57)]).then(n.bind(null,917)),{fallback:s.a.createElement("div",{className:"stw-flex stw-justify-center stw-p-4"},s.a.createElement("img",{src:"https://cdn.socratease.co/img/ring-loader.gif"}))});class h extends o.Component{constructor(e){super(e),i()(this,"getAnimationObject",e=>{this.animationObject=e});var t=this.getDefaultState();this.state=Object.assign({},t,{scInd:this.props.scInd,showImageInModal:!1})}componentDidMount(){var e,t;if(window.addEventListener("markedJsAsLoaded",e=>{this.setState(e.detail)}),"audio"===(null===(e=this.props)||void 0===e||null===(t=e.mediaData)||void 0===t?void 0:t.type)){var n,a=new URLSearchParams(window.location.search),i={};for(var[o,s]of a)i[o]=Number(s);if(null!==(n=null==i?void 0:i.play_once)&&void 0!==n&&n){var r,d=this.props.scNum,l=null!==(r=p.socStorage.getItem("audioPlayed.screen[".concat(d,"]")))&&void 0!==r&&r,c=document.getElementById("soc-content-preview-audio-".concat(d));l?(c.style.pointerEvents="none",c.style.opacity="0.4"):c.onplay=function(){p.socStorage.setItem("audioPlayed.screen[".concat(d,"]"),!0),c.style.pointerEvents="none",c.style.opacity="0.4"}}}this.setState({dummy:"value"})}getDefaultState(){var e={jsAnimation:!1,flashAnimation:!1,afterEffectsAnimation:!1,jsAnimationFilename:null,animationJSDownloadStarted:!1,isMediaLoaded:!1,animationRendered:!1,downloadingBodymovin:!1,downloadingCreatejs:!1,isNextMediaLoading:!1,nextScreenImage:null,spinnerLoaded:!1,animateCCdownloaded:!1,animateCC:null};return e.bodymovinLoaded="undefined"!=typeof bodymovin,e.createJSLoaded="undefined"!=typeof createjs&&createjs!={},e}setMediaType(e){if(["video","image","audio"].includes(e.type))return null;var t="adobeAnimate"===e.type,n="lotteAnimation"===e.type;if(this.state.flashAnimation!==t&&this.setState({flashAnimation:t,jsAnimation:!0}),this.state.afterEffectsAnimation!==n&&this.setState({afterEffectsAnimation:n,jsAnimation:!0}),t&&!this.state.createJSLoaded&&!this.state.downloadingCreatejs){var a=document.createElement("script");a.onload=function(){var e=new CustomEvent("markedJsAsLoaded",{detail:{createJSLoaded:!0}});window.dispatchEvent(e)},a.src="https://code.createjs.com/createjs-2015.11.26.min.js",document.getElementsByTagName("head")[0].appendChild(a),this.setState({downloadingCreatejs:!0})}if(n&&!this.state.bodymovinLoaded&&!this.state.downloadingBodymovin){var i=document.createElement("script");i.onload=function(){var e=new CustomEvent("markedJsAsLoaded",{detail:{bodymovinLoaded:!0}});window.dispatchEvent(e)},i.src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.8/lottie.min.js",document.getElementsByTagName("head")[0].appendChild(i),this.setState({downloadingBodymovin:!0})}}componentDidUpdate(e,t){var n=this.props.mediaData;if(!n)return null;if(n.location!==e.mediaData.location||"Image"!==n.type&&"SVG"!==n.type){var a=n.url;if(this.state.scInd!==this.props.scInd){var i=this.getDefaultState();i.scInd=this.props.scInd,this.setState(i)}if(null===a?this.state.isMediaLoaded||this.setState({isMediaLoaded:!0}):this.setMediaType(n),!this.state.jsAnimation||a===this.state.jsAnimationFilename&&this.state.isMediaLoaded)this.state.jsAnimation&&this.renderAnimation();else{var o=!1;if(this.state.animationJSDownloadStarted?o=!1:(this.state.afterEffectsAnimation||this.state.flashAnimation&&this.state.createJSLoaded)&&(o=!0),o){var s=document.createElement("script");s.onload=function(){var e=new CustomEvent("markedJsAsLoaded",{detail:{jsAnimationFilename:a,isMediaLoaded:!0}});window.dispatchEvent(e)},s.src=a,document.getElementsByTagName("head")[0].appendChild(s)}}!this.state.isNextMediaLoading&&this.state.isMediaLoaded}else this.state.isMediaLoaded||this.setState({isMediaLoaded:!0})}renderAnimation(){if(!this.state.animationRendered&&this.state.isMediaLoaded)if(this.state.flashAnimation&&this.state.createJSLoaded)this.getAnimationObject(),this.setState({animationRendered:!0});else{if(!this.state.afterEffectsAnimation||!this.state.bodymovinLoaded)return null;var e={container:document.getElementById("divLotteAnimations"),renderer:"svg",loop:!0,autoplay:!0,animationData:animationData};bodymovin.destroy(),bodymovin.loadAnimation(e),this.setState({animationRendered:!0})}}handleMediaLoaded(){this.setState({isMediaLoaded:!0},()=>{var e;null!==(e=this.props)&&void 0!==e&&e.onLoad&&this.props.onLoad()})}handleImageErrored(){this.setState({isMediaLoaded:!1})}render(){var e,t,n,a,i,o,d,l=this.props.mediaData,m=this.state.isMediaLoaded,p=this.state.nextScreenImage,h=null!==(e=null===(t=this.props)||void 0===t?void 0:t.mediaCtrClasses)&&void 0!==e?e:"stw-w-full md:stw-w-96 stw-h-full stw-max-w-xs lg:stw-max-w-md stw-mb-8 lg:stw-mb-2 stw-flex stw-justify-center stw-mx-auto  stw-rounded-lg ";return"document_render"===(null===(n=this.props)||void 0===n?void 0:n.contentType)&&(h="stw-w-full stw-h-full stw-max-w-full stw-mb-8 lg:stw-mb-2 stw-flex stw-justify-center stw-rounded-lg "),l&&null!=l.type?s.a.createElement("div",{className:"".concat(h," soc-les-media ").concat(null!==(a=this.props)&&void 0!==a&&a.customClasses?this.props.customClasses:"")},"adobeAnimate"===l.type&&(this.state.flashAnimation&&this.state.createJSLoaded&&this.state.isMediaLoaded?s.a.createElement("div",null,s.a.createElement(c.a,{screenname:this.props.scName,composition:"animation_id",getAnimationObject:this.getAnimationObject(),animationName:"_filename"})):s.a.createElement(v,{type:l.type})),"lotteAnimation"===l.type&&(this.state.isMediaLoaded?s.a.createElement("div",{id:"divLotteAnimations",className:"".concat(m?"show":"hide")}):s.a.createElement(v,{type:l.type})),"image"===l.type&&s.a.createElement("div",{className:"stw-w-full"},s.a.createElement("img",{className:"stw-rounded-md stw-shadow-sm stw-border stw-border-gray-200 stw-w-full",id:"image",src:null==l?void 0:l.url,onLoad:this.handleMediaLoaded.bind(this),onError:this.handleImageErrored.bind(this),onClick:()=>this.setState({showImageInModal:!0}),style:{cursor:"-webkit-zoom-in",cursor:"-moz-zoom-in",cursor:"zoom-in"}}),this.state.isMediaLoaded&&s.a.createElement("span",{className:"stw-hidden sm:stw-flex stw-justify-center stw-text-gray-600 stw-text-xs md:stw-text-sm stw-my-2",onClick:()=>this.setState({showImageInModal:!0})},"desktop"!==Object(u.getCurrentDevice)()?"Tap":"Click"," on image to zoom")),(null===(i=this.state)||void 0===i?void 0:i.showImageInModal)&&s.a.createElement(u.OpenImageInModal,{handleClose:()=>this.setState({showImageInModal:!1}),src:null==l?void 0:l.url}),"video"===l.type&&s.a.createElement("video",{id:"videoContent",autoPlay:!1,loop:!0,controls:!0,src:l.url,onLoadedData:this.handleMediaLoaded.bind(this)}),"audio"===l.type&&s.a.createElement("audio",{onLoadedData:this.handleMediaLoaded.bind(this),controls:!0,controlsList:"nodownload",autostart:"0",autostart:"false",id:"soc-content-preview-audio-".concat(null===(o=this.props)||void 0===o?void 0:o.scNum),className:"soc-content-preview-audio"},s.a.createElement("source",{src:l.url})),"reactCode"===l.type&&s.a.createElement(f,{value:l.mediaContent}),"pdf"===l.type&&s.a.createElement(r.PdfViewer,{pdfUrl:l.url,id:"soc-content-preview-pdf-".concat(null===(d=this.props)||void 0===d?void 0:d.scNum),onLoad:this.handleMediaLoaded.bind(this)}),null!==p?s.a.createElement("img",{style:{display:"none"},src:p}):null):s.a.createElement("div",{style:{display:"none"}},null!==p?s.a.createElement("img",{src:p}):null)}}var v=e=>{var{type:t}=e;return"reactCode"!==t&&s.a.createElement("div",{className:"stw-flex stw-justify-center stw-items-center stw-my-2 soc-con-les-media-loader",style:"video"===t?{minWidth:"400px",minHeight:"300px"}:null},"video"===t?s.a.createElement(m.lb,{className:"stw-h-4 stw-w-4 md:stw-h-6 md:stw-w-6 stw-mr-1"}):s.a.createElement(m.U,{className:"stw-h-4 stw-w-4 md:stw-h-6 md:stw-w-6 stw-mr-1"}),s.a.createElement("span",{className:"stw-text-gray-600 stw-text-sm"},"Loading ",Object(r.capitalizeFirstLetter)(t),"..."))};t.default=h},356:function(e,t,n){e.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=r(n(1)),s=r(n(2));function r(e){return e&&e.__esModule?e:{default:e}}var d=void 0,l=void 0,c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.dimensions={isResp:!1,respDim:"both",isScale:!1,scaleType:1,lastW:1,lastH:1,lastS:1},e.onAnimationReady=function(){window.addEventListener("resize",e.resizeCanvas),e.resizeCanvas(),e.startAnimation()},e.getComposition=function(t){var n=e.props.composition;return null!==n?n:function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,i=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(a=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(Object.keys(d.compositions).filter((function(e){var n=d.compositions[e].getLibrary();return Object.keys(n).filter((function(e){return!(!n[e].prototype||!n[e].prototype.mode||"independent"!==n[e].prototype.mode)})).filter((function(e){return e===t})).length>0})),1)[0]},e.loadLibs=function(){var e=window;if(d=e.AdobeAn,l=window.createjs,!d)throw new Error("AdobeAn dependency not found");if(!l)throw new Error("createjs dependency not found")},e.initAdobeAn=function(){var t=e.props.animationName,n=e.getComposition(t),a=void 0,i=void 0;try{a=(i=d.getComposition(n)).getLibrary()}catch(e){if("Cannot read property 'getLibrary' of undefined"===e.message){var o=new Error("Animation with name "+t+" was not found","test");throw o.name="AnimateCC",o}throw e}var s=new l.LoadQueue(!1);s.addEventListener("fileload",(function(t){e.handleFileLoad(t,i)})),s.addEventListener("complete",(function(t){e.handleComplete(t,i)})),a=i.getLibrary(),s.loadManifest(a.properties.manifest),0===a.properties.manifest.filter((function(e){return"image"===e.type})).length&&e.handleComplete(null,i)},e.handleComplete=function(t,n){var a=e.props,i=a.animationName,o=a.paused,s=a.getAnimationObject,r=n.getLibrary();if(t)for(var d=n.getSpriteSheet(),c=t.target,m=r.ssMetadata,u=0;u<m.length;u++)d[m[u].name]=new l.SpriteSheet({images:[c.getResult(m[u].name)],frames:m[u].frames});var p=new r[i];s(p),e.lib=p,e.lib.tickEnabled=!o;var f=new r.Stage(e.canvas);e.stage=f,e.setState({properties:r.properties},e.onAnimationReady)},e.handleFileLoad=function(e,t){var n=t.getImages();e&&"image"===e.item.type&&(n[e.item.id]=e.result)},e.startAnimation=function(){var t=e.state.properties;d.compositionLoaded(t.id),e.stage.addChild(e.lib),l.Ticker.setFPS(t.fps),l.Ticker.addEventListener("tick",e.stage)},e.stopAnimation=function(){l.Ticker.removeEventListener("tick",e.stage)},e.resizeCanvas=function(){var t=e.state.properties,n=t.width,a=t.height,i=window.innerWidth,o=window.innerHeight,s=window.devicePixelRatio||1,r=i/n,d=o/a,l=1,c=e.dimensions;c.isResp&&("width"===c.respDim&&c.lastW===i||"height"===c.respDim&&c.lastH===o?l=e.lastS:c.isScale?1===c.scaleType?l=Math.min(r,d):2===c.scaleType&&(l=Math.max(r,d)):(i<n||o<a)&&(l=Math.min(r,d))),e.canvas.width=n*s*l,e.canvas.height=a*s*l,e.stage.scaleX=s*l,e.stage.scaleY=s*l,c.lastW=i,c.lastH=o,c.lastS=l,e.stage.tickOnUpdate=!1,e.stage.update(),e.stage.tickOnUpdate=!0},e.state={properties:{},error:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"componentDidMount",value:function(){this.loadLibs();try{this.initAdobeAn()}catch(e){if("AnimateCC"!==e.name)throw e;console.error("AnimateCC: "+e.message),this.setState({error:!0})}}},{key:"componentDidUpdate",value:function(){var e=this.state.error,t=this.props.paused;e||(this.lib.tickEnabled=!t)}},{key:"componentWillUnmount",value:function(){this.state.error||(window.removeEventListener("resize",this.resizeCanvas),this.stopAnimation())}},{key:"render",value:function(){var e=this,n=this.props,i=(n.animationName,n.getAnimationObject,n.paused,n.style),s=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(n,["animationName","getAnimationObject","paused","style"]),r=this.state.properties;if(0===Object.keys(r).length)return o.default.createElement("div",null,o.default.createElement("div",{ref:function(t){e.animationContainer=t}},o.default.createElement("canvas",{ref:function(t){e.canvas=t}}),o.default.createElement("div",{ref:function(t){e.domOverlayContainer=t}})));var d=t.hexToRgba(r.color,r.opacity);return o.default.createElement("div",null,o.default.createElement("div",a({ref:function(t){e.animationContainer=t},style:a({width:"100%",height:"100%"},i)},s),o.default.createElement("canvas",{ref:function(t){e.canvas=t},style:{display:"block",width:"100%",backgroundColor:d}}),o.default.createElement("div",{ref:function(t){e.domOverlayContainer=t},style:{pointerEvents:"none",overflow:"hidden",width:r.width+"px",height:r.height+"px",position:"absolute",left:"0px",top:"0px",display:"block"}})))}}]),t}();c.hexToRgba=function(e,t){return"rgba("+parseInt(e.substring(1,3),16)+", "+parseInt(e.substring(3,5),16)+", "+parseInt(e.substring(5,7),16)+", "+t+")"},c.propTypes={animationName:s.default.string.isRequired,composition:s.default.string,getAnimationObject:s.default.func,paused:s.default.bool,style:s.default.object},c.defaultProps={getAnimationObject:function(){},composition:null,paused:!1,style:{}},t.default=c},function(e,t){e.exports=n(2)},function(e,t){e.exports=n(235)}])}}]);